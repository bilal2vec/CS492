<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="index.css">
    <title>CAPTCHA Accessibility Demo</title>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
    <script src="./index.js"></script>
</head>

<body>
    <div id="container">
        <div class="title">
            Proof of Humanity: the CAPTCHA Accessibility Problem
        </div>
        <div class="byline">
            By Bilal Khan, Elena Pan, & Kevin Tong
        </div>
        <section class="item">
            <p>
                "I'm not a robot". The animated checkbox and tiles are instantly recognizable to any netizen worthy of
                the
                name. What do these fuzzy letters say? How many animals are there? Find all the bicycles. As resources
                and
                services have increasingly found their way onto the internet, the defenses guarding their access have
                grown in
                sophistication.
            </p>

            <p>
                To protect against automated attacks, websites have an interest in determining if a user is indeed
                human, and
                the most common way of doing so is to use what's known as a reverse Turing test. That is, ask the user
                to
                complete a series of tasks <i>presumably</i> any human could easily complete but would cost a bot
                significant
                effort. Its most common reification is the CAPTCHA â€” the Completely Automated Public Turing test to tell
                Computers and Humans Apart. Here's Google's reCAPTCHAv2 (image not theirs):
            </p>

            <div style="width:100%;">
                <img src="images/beatles.png" class="beatles" alt="CAPTCHA asking user to identify crosswalks where the image
                        is the Beatles walking across a crosswalk, also the record cover of their album Abbey Road" />
            </div>

            <p>
                In the race to stump machines, it's not the machines that have been left behind, but many of our fellow
                humans. The pervasive assumption that all humans see, think, and understand in the same way has made
                CAPTCHA,
                especially as machine vision exceeds human vision, more a discriminator of ability among humans than
                against
                machines. But how do we make a fundamentally inaccessible puzzle accessible? In the interactions below,
                we
                demonstrate what works and doesn't work, some of the research, and some plausible solutions. Empathize
                and
                enjoy.
            </p>

        </section>

        <section>
            <h1>
                CAPTCHA Game
            </h1>
            <p>
                This is a demo of the CAPTCHA game. The goal is to select all images that contain a crosswalk. The
                images are displayed in a grid, and the user can select an image by clicking on it. Clicking again
                de-selects
                an image. Submit the chosen images for evaluation by clicking "Submit" and play again by clicking the
                "Play
                Again" button that appears. We encourage you to play multiple times to get a representative average
                time.
            </p>
            <!-- @bilal change image class -->
            <p>
                It takes the average user 32 seconds. We're confident you are not the average user ðŸ˜Š.
            </p>
            <div class="select">
                <h2>Select all crosswalk images</h2>
            </div>
            <div id="captcha"></div>
            <button id="captcha-start">Start</button>
            <button id="captcha-submit" hidden>Submit</button>
            <p id="captcha-timer" hidden></p>
            <p id="captcha-score"></p>
            <br />
            <button id="captcha-reset" hidden>Play Again</button>

            <p>
                This game is intended to be a simplified version of a CAPTCHA, not a replacement. By simulating
                challenges
                that may arise in completing the game, we aim to demonstrate how inaccessible CAPTCHAs become. This
                difficulty
                should be reflected in the average time required. We try to be as faithful as possible to the conditions
                that
                may lead to these challenges, and take full responsibility for any inaccuracies.
            </p>
        </section>

        <section>
            <h1>
                Vision Loss
            </h1>
            <p>
                About 12 million Americans have some form of vision impairment, of which 1 million are legally blind.
                4.2
                million have uncorrectable vision impairment, a number expected to double by 2050 due to the epidemics
                of
                diabetes and other chronic conditions. The most common impairment comes from vision distortion as a
                result of
                refractive errors (near- and far-sightedness), cataracts, or age-related macular degeneration. Roughly
                20
                million American over 40 have some form of cataracts and 1.8 million suffer macular degeneration.
                Macular
                degeneration has no known cure.
            </p>

            <div class="select">
                <h2>Select all crosswalk images</h2>
            </div>
            <div id="blurry_captcha"></div>
            <button id="blurry_captcha-start">Start</button>
            <button id="blurry_captcha-submit" hidden>Submit</button>
            <p id="blurry_captcha-timer" hidden></p>
            <p id="blurry_captcha-score"></p>
            <br />
            <button id="blurry_captcha-reset" hidden>Play Again</button>

            <p>
                Diabetic retinopathy is caused by damage to the blood vessels behind the eye, leading to patches of
                receptors
                unable to process light. An estimated 4.1 million Americans are affected by retinopathy of some form, of
                which
                nearly a million are deemed "vision-threatening".
            </p>

            <div class="select">
                <h2>Select all car images</h2>
            </div>
            <div id="diabetes_captcha"></div>
            <button id="diabetes_captcha-start">Start</button>
            <button id="diabetes_captcha-submit" hidden>Submit</button>
            <p id="diabetes_captcha-timer" hidden></p>
            <p id="diabetes_captcha-score"></p>
            <br />
            <button id="diabetes_captcha-reset" hidden>Play Again</button>

            <p>
                Color-blindness is a condition that affects 1 in 12 men and 1 in 200 women. It's characterized by the
                inability to distinguish between certain colors, most commonly between red and green (protanopia). This
                affects not just the colors red and green, but all colors (e.g. purple) that have them as a base color.
                Many
                color blind people are surprised to learn that peanut butter (which has a component of red color) is not
                in
                fact green. In a box of 24 crayons, most color blind people can only accurately identify 5 of them.
            </p>
            <p>
                In the following example, the user is asked to select all images of traffic lights with green signals.
                If the user is color blind, they may not be able to distinguish between the green and red signals and
                would be forced to rely on other cues such as the position of the lit signal in the traffic light. This
                is further complicated by cases such as where the traffic light is set up in a horizontal orientation,
                or more exotic traffic light setups with multiple signals.
            </p>

            <img src="images/upside-down-traffic-light.jpg" class="upside-down"
                alt="An unusual traffic light where the order of the red, yellow, and green lights is reversed." />
            <caption>An unusual traffic light where the order of the red, yellow, and green lights is reversed.
                (uncoveringnewyork.com)
            </caption>

            <h2>Select all images of Traffic Lights with Green Signals</h2>
            <div id="color_captcha"></div>
            <button id="color_captcha-start">Start</button>
            <button id="color_captcha-submit" hidden>Submit</button>
            <p id="color_captcha-timer" hidden></p>
            <p id="color_captcha-score"></p>
            <br />
            <button id="color_captcha-reset" hidden>Play Again</button>

        </section>

        <section>
            <h1>Solutions</h1>
            <p>
                We present these remedies assuming a solution would keep the graphical interface. An immediately obvious
                solution is multimodal CAPTCHAs: users may select between visual, auditory, or even biometric inputs,
                but
                we save that for the very end.
            </p>

            <p>
                Humans are hardwired to recognize faces and the emotions they display even with quite severe
                distortions. A
                raised eyebrow or a sideways head are easy to recognize because of the numerous contours that define the
                human
                face. Colors no longer matter; we still recognize the person under the face paint. Asking users to
                identify
                faces with a particular emotion is an effective way to bypass visual distortions to a certain degree.
            </p>

            <p>
                Emotion CAPTCHAs may fail for users with social-emotional agnosia or alexithymia, which inhibits the
                characterization and understanding of emotional display. Both often occur in individuals with
                schizophrenia or
                autism.
            </p>

            <p>
                In a similar vein, motion CAPTCHAs rely on the ability to understand cause and effect in the physical
                world. A
                short GIF of a person or object moving through space is enough to answer the question "what preceded
                this" or
                "what follows this". For example, a person moving their arms towards their chest suggests a hug, or a
                lamp
                precariously placed suggests it will fall over. Given multiple choices of possibilities, the user
                selects the
                correct one.
            </p>

            <div style="width:100%;">
                <img src="images/motion_captcha.png" class="motion_captcha"
                    alt="An example of the captcha where you are shown a short video of a person performing an action then asked to choose the option that best fits the video" />
            </div>

            <p>
                This solution is especially effective if the user has extremely limited vision. Screen readers, which
                are
                normally inoperable on CAPTCHAs (that would defeat the purpose) can be used to read alt-text on images
                (e.g.
                "the lamp is wobbly") as well as the multiple choices.
            </p>

            <p>
                The following are similar ideas or ideas limited to certain contexts:
            </p>

            <ul>
                <li> A similar cause and effect based solution requires re-organizing the panes of a cartoon.</li>
                <li> When logging into a social media account, identify faces that belong to a friend. </li>
                <li> Pattern recognition. Which object does this shadow come from? Find hollow shapes with 7 sides.
                </li>
                <li> Drag a cursor in the shape of a pear. Requires motor control and dexterity. </li>
            </ul>
        </section>


        <section>
            <h1 class="dyslexia">Reading Disorders and Languages</h1>

            <p class="dyslexia">
                Dyslexia, which affects the ability to read, is present in around 3-7% of the population at varying
                degrees
                and up to 20% may have some general symptoms that go unnoticed and undiagnosed. We recreate here what a
                dyslexic reader might experience with normal text. It should be clear that heavily convoluted series of
                letters with neither context nor morphemic cues (ie. prefixes, word stems, etc. ) are even more
                difficult.
                Below we present samples to any user from the "difficult" text CAPTCHA dataset.
            </p>

            <div style="width:100%;">
                <img src="images/difficult_text_captcha.png" class="difficult_text_captcha"
                    alt="A series of distorted-text captchas of high difficulty." />
            </div>

            <p>
                Inaccessibility doesn't even need to come from psychological conditions. Most of the world does not
                speak
                English or use the Latin alphabet. Text CAPTCHAs which require users to type out an answer in an
                alternate
                keyboard while matching unfamiliar characters is an easily solvable problem â€” generate text in different
                alphabets. While we expect the most commonly used websites to be internationalized (support different
                languages), CAPTCHAs were conspicuously behind in this trend for several years. Image based CAPTCHAs,
                such as
                the ones Google provide, support internationalization (another good reason why users must be able to
                choose
                their preferred modality). Here's a real-life example of a captcha in Cyrillic (alphabet of 32 letters
                that over 250 million people in Eurasia read and write), typing out a sentence such as "aÐ»Ð¼Ð°Ð· school" on
                an English
                keyboard is exceedingly difficult.
            </p>

            <div style="width:100%;">
                <img src="images/cyrllic_captcha.jpeg" class="cyrllic_captcha"
                    alt="A text-based caption in Cyrillic." />
            </div>
        </section>

        <section>
            <h1>
                Solutions
            </h1>

            <p>
                Apart from increased internationalization, no good workarounds exist for text-based CAPTCHA solutions.
                Whereas
                with common visual impairments the problem is with transmitting information, textual impairment is
                usually
                caused by an underlying difficulty in interpreting information. Given that solving times for text based
                CAPTCHAs are only marginally shorter than image based CAPTCHA but have a higher rate of inaccuracy, we
                believe
                it should be completely eliminated.
            </p>

            <p>
                We discuss the concept of a "MAPTCHA", or mathematical CAPTCHA, for the sake of completeness. A
                numerical prompt supported by a screen reader offers a logic or reasoning puzzle to the user. This fails
                to work for several reasons including for users with cognitive impairments such as dyscalculia. The
                general public also often exhibits an inability to reason.
            </p>
        </section>

        <section>
            <h1>
                Auditory Impairment
            </h1>
            Audio CAPTCHAs have almost completely been phased out. A computer generated voice reads a sentence or word
            which
            the user types out. Not only is sound ineffective in noisy environments, computer generated audio is much
            more
            difficult to interpret than human speech. The most common impairment, hearing loss or deafness, has little
            room
            for accessibility improvements from a developer's point of view. You can only turn up the volume, and that
            only
            goes so far. Needing to replay the audio repeatedly for all users represents a poor user experience. We
            think
            audio CAPTCHAs should only be offered as an alternate modal when visual modes fail; it should never be the
            default.

        </section>

        <section>
            <h1>
                General Solutions
            </h1>

            <p>
                Biometrics, such as fingerprints and facial profiles, provide a secure form of identification. However,
                the
                limitations of biometrics must be considered, such as those who do not have fingers or who are too old
                for fingerprints to be viable.
            </p>
            <p>
                Zero knowledge proof is an interactive solution that requires a hardware device from a reliable
                manufacturer,
                such as Yubikey. The device authenticates a user's identity by providing a unique one-time password or
                public key.
            </p>
            <p>
                Third-party solutions include Google's reCAPTCHA v2 and v3. The v2 reCAPTCHA process involves presenting
                the user with
                a challenge, such as identifying objects in an image or solving a math problem, and then analyzing their
                response to
                determine whether they are human. The challenge is designed to be very easy for humans to solve but
                difficult for bots to bypass.
                Conversely, reCAPTCHA v3 does not require any user interaction or challenge solving. Instead, it runs in
                the background of
                the website and evaluates the user's behavior on the site, such as mouse movements and keyboard input,
                to determine the
                probability that they are a bot. However, one potential disadvantage of these is that they requires
                website owners
                to share a significant amount of user data with Google, including IP addresses, user agents, and other
                browsing behavior.
                This may raise privacy concerns for users and website owners who are uncomfortable sharing this
                information with a
                third party.
                Alternative and less invasive approaches include building a CAPTCHA who's goal is not to identify if a
                user is a human or
                not, but to explicitly identify users that are bots by asking them to perform tasks a human could not
                reliably do. This technique is called a "Honeypot CAPTCHA" and, for example, can be implemented by
                asking the user to leave a text field blank when filling out a form or signing up for an online service.
                If the user fills out the field, they are likely a bot.

            </p>
            <p>
                However, as AI becomes more advanced, advanced bots may be able to bypass the challenge
                or use
                techniques such as human emulation to fool the system.
            </p>
        </section>

        <section>
            <h1>
                <!-- @kevin todo -->
                To sum up...
            </h1>
        </section>

        <!-- Dyslexia script from https://geon.github.io/programming/2016/03/03/dsxyliea -->
        <script type="text/javascript">
            var getTextNodesIn = function (el) {
                return $(el).find(":not(iframe,script)").addBack().contents().filter(function () {
                    return this.nodeType == 3;
                });
            };

            var textNodes = getTextNodesIn($(".dyslexia"));
            // var textNodes = getTextNodesIn($("*"));

            function isLetter(char) {
                return /^[\d]$/.test(char);
            }


            var wordsInTextNodes = [];
            for (var i = 0; i < textNodes.length; i++) {
                var node = textNodes[i];

                var words = []

                var re = /\w+/g;
                var match;
                while ((match = re.exec(node.nodeValue)) != null) {

                    var word = match[0];
                    var position = match.index;

                    words.push({
                        length: word.length,
                        position: position
                    });
                }

                wordsInTextNodes[i] = words;
            };


            function messUpWords() {

                for (var i = 0; i < textNodes.length; i++) {

                    var node = textNodes[i];

                    for (var j = 0; j < wordsInTextNodes[i].length; j++) {

                        // Only change a tenth of the words each round.
                        if (Math.random() > 1 / 10) {

                            continue;
                        }

                        var wordMeta = wordsInTextNodes[i][j];

                        var word = node.nodeValue.slice(wordMeta.position, wordMeta.position + wordMeta.length);
                        var before = node.nodeValue.slice(0, wordMeta.position);
                        var after = node.nodeValue.slice(wordMeta.position + wordMeta.length);

                        node.nodeValue = before + messUpWord(word) + after;
                    };
                };
            }

            function messUpWord(word) {

                if (word.length < 3) {

                    return word;
                }

                return word[0] + messUpMessyPart(word.slice(1, -1)) + word[word.length - 1];
            }

            function messUpMessyPart(messyPart) {

                if (messyPart.length < 2) {

                    return messyPart;
                }

                var a, b;
                while (!(a < b)) {

                    a = getRandomInt(0, messyPart.length - 1);
                    b = getRandomInt(0, messyPart.length - 1);
                }

                return messyPart.slice(0, a) + messyPart[b] + messyPart.slice(a + 1, b) + messyPart[a] + messyPart.slice(b + 1);
            }

            // From https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/random
            function getRandomInt(min, max) {

                return Math.floor(Math.random() * (max - min + 1) + min);
            }

            setInterval(messUpWords, 50);
        </script>
        <script src="captcha.js"></script>
    </div>
</body>

</html>